<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>抽奖计次</title>
    <style>
		div{
			width: 1000px;
			height: 1000px;
			position: absolute;
			left: 30%;
            top:30%;
		}
    </style>
</head>
<body>
    <div>
        <table border="1px">
            <tr>
                <td></td><th>杨晨</th><th>李勇</th><td>讲台</td><td></td><th>伍飞</th><td></td>
            </tr>
            <tr>
                <th>胡嘉伟</th><th>王文好</th><td></td><td rowspan="8">过道</td><th>何伟</th><th>潘杰</th><th>胡飞飞</th>
            </tr>
            <tr>
                <th>宋艳辉</th><th>柴源</th><th>李扬</th><td></td><th>陆雪莲</th><th>颜龙强</th>
            </tr>
            <tr>
                <th>项一旻</th><th>顾磊</th><th>胡佳富</th><th>张瑞洋</th><th>李骁尧</th><th>耿嘉颢</th>
            </tr>
            <tr>
                <th>曾旭松</th><th>徐济超</th><th>刘运</th><th>贾彦惠</th><th>王帅</th><th>陈旺</th>
            </tr>
            <tr>
                <th>毛荣庆</th><th>杜志豪</th><th>王丰淇</th><th>高华松</th><th>方伟阳</th><th>殷红星</th>
            </tr>
            <tr>
                <th>乔华宝</th><th>刘腾飞</th><th>曾强</th><th>夏强</th><th>洪伟</th><th>陆家豪</th>
            </tr>
            <tr>
                <th>李俍锐</th><th>袁立扬</th><th>张舜</th><th>李华伟</th><th>吴召召</th><td></td>
            </tr>
            <tr>
                <td></td><th>袁依同</th><td></td><th>李奇</th><th>孔铭飞</th><td></td>
            </tr>
            <tr><td colspan="7" align="center"><button title="按钮">开始抽奖</button></td></tr>
            <tr><td colspan="7" align="center" id="i"></td></tr>
        </table>
    </div>

    
</body>
    <script>
        let btn = document.getElementsByTagName("button")[0];
        let ths = document.getElementsByTagName("th");
        let count=0;//记录抽奖次数
        let orangeIndex=0;//记录上一次中奖人的下标
        btn.onclick = function () {
            ths[orangeIndex].style.backgroundColor = "white";//将上一次中奖人的背景置白
            count++;
            btn.disabled = true;
            let m=0;
            let random=Math.random()*ths.length*3+ths.length;
            random=(count===2)?random:random;
            let base=0.0000026667*random*random-0.00113333*random+1.145;
            for(let i=0;i<random+1;i++){
                setTimeout(()=>{
                    if(i<random){
                        document.getElementById("i").innerText="滚动次数:"+(i+1)+"　　"+"抽奖次数:"+count;
                        m=(m===ths.length)?0:m;
                        ths[m===0?ths.length-1:m-1].style.backgroundColor = "white";
                        ths[m].style.backgroundColor = "orange";
                        m++;
                    }else {
                        btn.disabled = false;
                        alert("恭喜"+ ths[m-1].innerText+"同学");
                        orangeIndex=m-1;
                    }
                },i*50+Math.pow(base,i)*80);
            }
        }
    </script>
</html>